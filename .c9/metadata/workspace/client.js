{"filter":false,"title":"client.js","tooltip":"/client.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":63,"column":3},"action":"insert","lines":["// Load app dependencies","var http = require('http'),","    path = require('path'),","    express = require('express'),","    twilio = require('twilio');","","// Load configuration information from system environment variables.","var TWILIO_ACCOUNT_SID = process.env.TWILIO_ACCOUNT_SID,","    TWILIO_AUTH_TOKEN = process.env.TWILIO_AUTH_TOKEN,","    TWILIO_NUMBER = process.env.TWILIO_NUMBER;","","// Create an authenticated client to access the Twilio REST API","var client = twilio(TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN);","","var token = \"\";","// Create an Express web application with some basic configuration","var capability = express();","","capability.configure(function(){","    capability.set('port', '8082');","    capability.set('views', __dirname + '/views');","    capability.set('view engine', 'ejs');","    capability.use(express.favicon());","    capability.use(express.logger('dev'));","    capability.use(express.bodyParser());","    capability.use(express.methodOverride());","    capability.use(capability.router);","    capability.use(express.static(path.join(__dirname, 'public')));","});","var capabilityToken = new twilio.Capability(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN);","","capability.get('/', function(request, response) {","    ","    //capabilityToken.allowClientOutgoing('AP26d240f62ae732c46dc660c349a6065e');","    capabilityToken.allowClientIncoming('tommy');","    response.render('capability.ejs', {","        token:capabilityToken.generate()","    });","});","","capability.post('/', function(request, response) {","    //capabilityToken.allowClientOutgoing('AP26d240f62ae732c46dc660c349a6065e');","    capabilityToken.allowClientIncoming('tommy');","});","","capability.get('/form', function(request, response) {","  response.render('capability.ejs', {","      token:token","  });  ","});","capability.get('/call', function(request, response) {","    var twiml = new twilio.TwimlResponse();","    twiml.dial({","        callerId: '+17135974166'","   }, function(){","     this.number(request.query.tocall);","   });","     response.set('Content-Type', 'text/xml');","    response.send(twiml.toString());","});","// Start our express ivr, by default on port 3000","http.createServer(capability).listen(capability.get('port'), function(){","    console.log(\"Express server listening on port \" + capability.get('port'));","});"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":25,"column":45},"end":{"row":25,"column":45},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1471906237332,"hash":"5e079c1efeb304d1d17e8ceca092edb19d080f50"}